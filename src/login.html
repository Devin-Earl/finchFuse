<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login</title>
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="./style.css">
    <script src="https://unpkg.com/@aws-amplify/ui-components"></script>
</head>
<body class="container my-4">

    <!-- Login Header -->
    <div class="text-center mb-4">
        <h1>Login to FinchFuse</h1>
    </div>

    <!-- Amplify Authenticator Component -->
    <div class="text-center mb-4">
        <amplify-authenticator>
            <amplify-sign-in slot="sign-in" header-text="Sign In" username-alias="email"></amplify-sign-in>
        </amplify-authenticator>
    </div>

    <script type="module">
        import Amplify from 'aws-amplify';
        import awsExports from './aws-exports.js';

        Amplify.configure(awsExports);

        document.addEventListener('DOMContentLoaded', async () => {
            const authenticator = document.querySelector('amplify-authenticator');
            authenticator.handleAuthStateChange = (nextAuthState, authData) => {
                if (nextAuthState === 'signedin') {
                    alert('Login successful!');
                    window.location.href = './index.html';
                }
            };
        });
    </script>
</body>
</html>
